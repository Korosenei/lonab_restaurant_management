<!-- accounts/modals/agence_form.html -->
<!-- AUCUN <script> dans ce fichier — tout le JS est dans agences_list.html -->
<div class="modal-overlay" id="agenceFormModal">
    <div class="modal modal-large">
        <div class="modal-header">
            <div class="modal-title">
                <i class="fas fa-building"></i>
                <span id="agenceModalTitle" data-default-title="Nouvelle agence">Nouvelle agence</span>
            </div>
            <button class="modal-close" type="button" onclick="closeModal('agenceFormModal')">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <form id="agenceFormEl">
            {% csrf_token %}
            <input type="hidden" id="agence_id" name="id">
            <div class="modal-body">
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Nom <span>*</span></label>
                        <input type="text" id="ag_nom" name="nom" class="form-control" required placeholder="Agence de...">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Code <span>*</span></label>
                        <input type="text" id="ag_code" name="code" class="form-control" required placeholder="AG-OUA-01">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Type <span>*</span></label>
                        <select id="ag_type" name="type_agence" class="form-control" required>
                            <option value="LOCALE">Locale</option>
                            <option value="REGIONALE">Régionale</option>
                            <option value="SIEGE">Siège</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Ville <span>*</span></label>
                        <input type="text" id="ag_ville" name="ville" class="form-control" required placeholder="Ouagadougou">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Téléphone <span>*</span></label>
                        <input type="tel" id="ag_telephone" name="telephone" class="form-control" required placeholder="+226 XX XX XX XX">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" id="ag_email" name="email" class="form-control" placeholder="agence@lonab.bf">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Direction</label>
                        <select id="ag_direction" name="direction" class="form-control">
                            <option value="">Aucune</option>
                            {% for direction in directions %}
                            <option value="{{ direction.id }}">{{ direction.nom }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Responsable</label>
                        <select id="ag_responsable" name="responsable" class="form-control">
                            <option value="">Aucun</option>
                            {% for manager in responsables %}
                            <option value="{{ manager.id }}">{{ manager.get_full_name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="form-group form-grid-full">
                        <label class="form-label">Adresse <span>*</span></label>
                        <textarea id="ag_adresse" name="adresse" class="form-control" rows="2" required placeholder="Adresse complète de l'agence"></textarea>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline" onclick="closeModal('agenceFormModal')">
                    <i class="fas fa-times"></i> Annuler
                </button>
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-save"></i> Enregistrer
                </button>
            </div>
        </form>
    </div>
</div>